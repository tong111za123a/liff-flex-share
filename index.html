<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>üñ§‚û£‡ªÇ„ÅÆ·Äî·Äê’É‡∏±‡πà’Å¬π‚úØüñ§</title>

<script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>

<style>
body{
  margin:0;
  min-height:100vh;
  font-family:sans-serif;
  background:url('https://i.postimg.cc/j5Gkxs3K/IMG-1275.gif') center/cover fixed;
  color:#fff;
  display:flex;
  justify-content:center;
  align-items:center;
}
.panel{
  width:92%;
  max-width:360px;
  background:rgba(0,0,0,.75);
  padding:15px;
  border-radius:10px;
  text-align:center;
}
input{
  width:95%;
  padding:10px;
  margin-top:8px;
  background:#222;
  color:#fff;
  border:none;
  border-radius:5px;
}
button{
  margin-top:10px;
  padding:10px;
  font-size:15px;
  background:#000;
  color:#0ff;
  border:1px solid #0ff;
  border-radius:5px;
}
button:hover{
  background:#0ff;
  color:#000;
}
.qr img{
  width:160px;
  margin-top:10px;
  border:2px solid #0ff;
  border-radius:8px;
}
.hidden{display:none;}
</style>
</head>

<body>

<!-- üîê ‡∏´‡∏ô‡πâ‡∏≤‡πÉ‡∏™‡πà‡∏£‡∏´‡∏±‡∏™ -->
<div class="panel" id="loginPanel">
  <h3>üîê ‡πÉ‡∏™‡πà‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô</h3>
  <input type="password" id="password" placeholder="‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô">
  <button onclick="checkAccess()">‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</button>
</div>

<!-- ‚ùå ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå -->
<div class="panel hidden" id="denyPanel">
  <h3>‚õî ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</h3>
  <p style="font-size:13px">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏∞‡∏ö‡∏ö</p>
  <button onclick="contactCreator()">‚ûï ‡πÅ‡∏≠‡∏î LINE ‡∏ú‡∏π‡πâ‡∏™‡∏£‡πâ‡∏≤‡∏á</button>
  <div class="qr">
    <img src="https://img5.pic.in.th/file/secure-sv1/IMG_12468d6ce5b9565e3489.jpeg">
    <p>‡∏™‡πÅ‡∏Å‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏≠‡∏î‡πÑ‡∏•‡∏ô‡πå</p>
  </div>
</div>

<!-- ‚úÖ ‡∏´‡∏ô‡πâ‡∏≤‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏à‡∏£‡∏¥‡∏á -->
<div class="panel hidden" id="mainPanel">
  <h3 id="greeting">‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ</h3>

  <p style="color:#0ff;font-size:13px">
    ‡πÉ‡∏™‡πà‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û ‡πÄ‡∏ß‡πâ‡∏ô‡∏ß‡∏£‡∏£‡∏Ñ ‡∏ï‡∏≤‡∏°‡∏î‡πâ‡∏ß‡∏¢‡πÑ‡∏≠‡∏î‡∏µ‡πÑ‡∏•‡∏ô‡πå
  </p>

  <input id="genInput" placeholder="URL‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û ‡πÑ‡∏≠‡∏î‡∏µ‡πÑ‡∏•‡∏ô‡πå">

  <button onclick="sendFlex()">‡πÅ‡∏ä‡∏£‡πå Flex</button>
  <button onclick="window.location.href='https://pic.in.th/?lang=th'"
    style="border-color:#ff00ff;color:#ff00ff">
    ‡∏ù‡∏≤‡∏Å‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û
  </button>
</div>

<script>
/* ================== ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ ================== */

// üî¥ LIFF ID
const LIFF_ID = "2008621627-1eN2VA2x";

// üîê ‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô (‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ)
const PASSWORD = "357000";

// üëë LINE ‡∏ú‡∏π‡πâ‡∏™‡∏£‡πâ‡∏≤‡∏á
const ADMIN_LINE = "mc357.com";

// ‚úÖ UserId ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå
const WHITELIST = [
  "Ua48c35a3cd7641afee1d85c317032ad5",
  "Uffa99b9ba90b2d097eb5300c6a521560"
];

/* ============================================ */

liff.init({ liffId: LIFF_ID });

async function checkAccess(){
  const pass = document.getElementById("password").value.trim();
  if(pass !== PASSWORD) return deny();

  if(!liff.isLoggedIn()) liff.login();

  const profile = await liff.getProfile();
  if(!WHITELIST.includes(profile.userId)) return deny();

  document.getElementById("loginPanel").classList.add("hidden");
  document.getElementById("mainPanel").classList.remove("hidden");
  document.getElementById("greeting").innerText =
    "‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏Ñ‡∏∏‡∏ì " + profile.displayName;
}

function deny(){
  document.getElementById("loginPanel").classList.add("hidden");
  document.getElementById("mainPanel").classList.add("hidden");
  document.getElementById("denyPanel").classList.remove("hidden");
}

function contactCreator(){
  location.href = "https://line.me/ti/p/~" + ADMIN_LINE;
}

// ‡∏™‡πà‡∏á Flex (‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏î‡∏¥‡∏°)
async function sendFlex(){
  if(!liff.isInClient()) return alert("‚ö† ‡πÄ‡∏õ‡∏¥‡∏î‡∏ú‡πà‡∏≤‡∏ô LINE");

  const raw = document.getElementById("genInput").value.trim();
  const parts = raw.split(" ");
  if(parts.length < 2) return alert("‚ùå format ‡∏ú‡∏¥‡∏î");

  const [imageUrl, lineId] = parts;

  const flexMsg = {
    type:"flex",
    altText:"FLEX ‡∏ü‡∏£‡∏µ ‡∏™‡∏ô‡πÉ‡∏à‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠",
    contents:{
      type:"bubble",
      size:"giga",
      hero:{
        type:"image",
        url:imageUrl,
        size:"full",
        aspectMode:"cover",
        aspectRatio:"2:3"
      },
      action:{
        type:"uri",
        uri:"https://line.me/ti/p/~"+lineId
      }
    }
  };

  await liff.shareTargetPicker([flexMsg]);
}
</script>

</body>
</html>